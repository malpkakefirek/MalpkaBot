"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _child_process = require("child_process");

var _logger = _interopRequireDefault(require("./logger"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const logger = (0, _logger.default)('executor');
var _default = {
  // https://nodejs.org/api/child_process.html#child_process_child_process_spawnsync_command_args_options
  spawnSync: (cmd, args, childOptions) => {
    logger.debug(cmd, args);
    const child = (0, _child_process.spawnSync)(cmd, args, childOptions);

    if (child.error) {
      logger.debug('Critical error occurred.');
      throw new Error(child.stderr.toString());
    }

    return {
      exitCode: child.status,
      message: child.stdout ? child.stdout.toString() : ''
    };
  }
};
exports.default = _default;
module.exports = exports["default"];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9leGVjdXRvci5qcyJdLCJuYW1lcyI6WyJsb2dnZXIiLCJzcGF3blN5bmMiLCJjbWQiLCJhcmdzIiwiY2hpbGRPcHRpb25zIiwiZGVidWciLCJjaGlsZCIsImVycm9yIiwiRXJyb3IiLCJzdGRlcnIiLCJ0b1N0cmluZyIsImV4aXRDb2RlIiwic3RhdHVzIiwibWVzc2FnZSIsInN0ZG91dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7O0FBQ0EsTUFBTUEsU0FBUyxxQkFBTyxVQUFQLENBQWY7ZUFFZTtBQUNiO0FBQ0FDLGFBQVcsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQVlDLFlBQVosS0FBNkI7QUFDdENKLFdBQU9LLEtBQVAsQ0FBYUgsR0FBYixFQUFrQkMsSUFBbEI7QUFDQSxVQUFNRyxRQUFRLDhCQUFVSixHQUFWLEVBQWVDLElBQWYsRUFBcUJDLFlBQXJCLENBQWQ7O0FBQ0EsUUFBSUUsTUFBTUMsS0FBVixFQUFpQjtBQUNmUCxhQUFPSyxLQUFQLENBQWEsMEJBQWI7QUFDQSxZQUFNLElBQUlHLEtBQUosQ0FBVUYsTUFBTUcsTUFBTixDQUFhQyxRQUFiLEVBQVYsQ0FBTjtBQUNEOztBQUNELFdBQU87QUFDTEMsZ0JBQVVMLE1BQU1NLE1BRFg7QUFFTEMsZUFBU1AsTUFBTVEsTUFBTixHQUFlUixNQUFNUSxNQUFOLENBQWFKLFFBQWIsRUFBZixHQUF5QztBQUY3QyxLQUFQO0FBSUQ7QUFiWSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3Bhd25TeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5cbmltcG9ydCBMb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuY29uc3QgbG9nZ2VyID0gTG9nZ2VyKCdleGVjdXRvcicpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8vIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvY2hpbGRfcHJvY2Vzcy5odG1sI2NoaWxkX3Byb2Nlc3NfY2hpbGRfcHJvY2Vzc19zcGF3bnN5bmNfY29tbWFuZF9hcmdzX29wdGlvbnNcbiAgc3Bhd25TeW5jOiAoY21kLCBhcmdzLCBjaGlsZE9wdGlvbnMpID0+IHtcbiAgICBsb2dnZXIuZGVidWcoY21kLCBhcmdzKTtcbiAgICBjb25zdCBjaGlsZCA9IHNwYXduU3luYyhjbWQsIGFyZ3MsIGNoaWxkT3B0aW9ucyk7XG4gICAgaWYgKGNoaWxkLmVycm9yKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0NyaXRpY2FsIGVycm9yIG9jY3VycmVkLicpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGNoaWxkLnN0ZGVyci50b1N0cmluZygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4aXRDb2RlOiBjaGlsZC5zdGF0dXMsXG4gICAgICBtZXNzYWdlOiBjaGlsZC5zdGRvdXQgPyBjaGlsZC5zdGRvdXQudG9TdHJpbmcoKSA6ICcnLFxuICAgIH07XG4gIH0sXG59O1xuIl19